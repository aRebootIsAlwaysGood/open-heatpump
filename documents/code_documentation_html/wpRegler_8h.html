<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wärmepumpensteuerung: wpRegler.h-Dateireferenz</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wärmepumpensteuerung
   &#160;<span id="projectnumber">1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Erzeugt von Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Suchen');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Suchen');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('wpRegler_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Datenstrukturen</a> &#124;
<a href="#enum-members">Aufzählungen</a> &#124;
<a href="#func-members">Funktionen</a>  </div>
  <div class="headertitle">
<div class="title">wpRegler.h-Dateireferenz</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header-Datei zum Modul Regler mit Datenstrukturen.  
<a href="#details">Mehr ...</a></p>
<div class="textblock"><div class="dynheader">
Dieser Graph zeigt, welche Datei direkt oder indirekt diese Datei enthält:</div>
<div class="dyncontent">
<div class="center"><img src="wpRegler_8h__dep__incl.png" border="0" usemap="#wpRegler_8hdep" alt=""/></div>
<map name="wpRegler_8hdep" id="wpRegler_8hdep">
<area shape="rect" id="node2" href="wpMain_8ino.html" title="Hauptmodul welches die oberste Programmebene darstellt. " alt="" coords="5,80,92,107"/>
<area shape="rect" id="node3" href="wpRegler_8ino.html" title="Enthält die Heizkurvenfunktion und Vorlauftemperaturregelung. " alt="" coords="117,80,213,107"/>
</map>
</div>
</div>
<p><a href="wpRegler_8h_source.html">gehe zum Quellcode dieser Datei</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Datenstrukturen</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structHEIZKURVE.html">HEIZKURVE</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Datenstruktur zur Erzeugung des Arrays mit Heizkurven-Steigung und Verschiebung.  <a href="structHEIZKURVE.html#details">Mehr ...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Aufzählungen</h2></td></tr>
<tr class="memitem:a2f49593e5867f1971ff3147d5421cbb9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9">reglerState_t</a> { <a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9ab235a30030df40382a55b054395c5542">REGLER_STATE_OFF</a>, 
<a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9af54676cb64f772debe5bef366153dc0b">REGLER_STATE_AUTO</a>, 
<a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9a974c6906c8a3ab3d4b0123ef2e2c32f3">REGLER_STATE_MANUAL</a>, 
<a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9a73c84f84274530b967474867d3a4151b">REGLER_STATE_LADEN</a>, 
<a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9a84ed36bb8a68c12c1b63a45c43a37b46">REGLER_STATE_DEFROST</a>
 }</td></tr>
<tr class="memdesc:a2f49593e5867f1971ff3147d5421cbb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerator Typedef für Regler Betriebszustand Steuerung.  <a href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9">Mehr ...</a><br /></td></tr>
<tr class="separator:a2f49593e5867f1971ff3147d5421cbb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funktionen</h2></td></tr>
<tr class="memitem:afb8c37e2ac60ef06ab2ca3e72945031f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wpRegler_8h.html#afb8c37e2ac60ef06ab2ca3e72945031f">calcTvorlauf</a> (int16_t tAussen, int8_t kurvenstufe, int8_t parallelver, int8_t reduziert)</td></tr>
<tr class="memdesc:afb8c37e2ac60ef06ab2ca3e72945031f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Berechnet Solltemperatur des Heizungsvorlauf mittels Heizkurve.  <a href="#afb8c37e2ac60ef06ab2ca3e72945031f">Mehr ...</a><br /></td></tr>
<tr class="separator:afb8c37e2ac60ef06ab2ca3e72945031f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a802a6ca104db722b268f0693497b7094"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wpRegler_8h.html#a802a6ca104db722b268f0693497b7094">reglerStatemachine</a> (<a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9">reglerState_t</a> reglerState)</td></tr>
<tr class="memdesc:a802a6ca104db722b268f0693497b7094"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zustandsautomat für den Heizungsvorlauf-Temperaturregler.  <a href="#a802a6ca104db722b268f0693497b7094">Mehr ...</a><br /></td></tr>
<tr class="separator:a802a6ca104db722b268f0693497b7094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed1136d4cbd9952d22b46b8e3893c4a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wpRegler_8h.html#aed1136d4cbd9952d22b46b8e3893c4a5">initRegler</a> ()</td></tr>
<tr class="memdesc:aed1136d4cbd9952d22b46b8e3893c4a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reinitialisieren des Dreipunktreglers.  <a href="#aed1136d4cbd9952d22b46b8e3893c4a5">Mehr ...</a><br /></td></tr>
<tr class="separator:aed1136d4cbd9952d22b46b8e3893c4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a336e5d87772f3de9fb4e748a47092e95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wpRegler_8h.html#a336e5d87772f3de9fb4e748a47092e95">tristateRegler</a> (float w, float x, float kp=0.35, float e_min=0.4, float hyst=0.2, float tn=1.0)</td></tr>
<tr class="memdesc:a336e5d87772f3de9fb4e748a47092e95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quasi-stegiger Dreipunktregler für Dreiweg-Mischventil.  <a href="#a336e5d87772f3de9fb4e748a47092e95">Mehr ...</a><br /></td></tr>
<tr class="separator:a336e5d87772f3de9fb4e748a47092e95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Ausführliche Beschreibung</h2>
<div class="textblock"><p>Header-Datei zum Modul Regler mit Datenstrukturen. </p>
<dl class="section author"><dt>Autor</dt><dd>Daniel Schmissrauter </dd></dl>
<dl class="section date"><dt>Datum</dt><dd>09.01.2018 </dd></dl>

<p class="definition">Definiert in Datei <a class="el" href="wpRegler_8h_source.html">wpRegler.h</a>.</p>
</div><h2 class="groupheader">Dokumentation der Aufzählungstypen</h2>
<a id="a2f49593e5867f1971ff3147d5421cbb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f49593e5867f1971ff3147d5421cbb9">&#9670;&nbsp;</a></span>reglerState_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9">reglerState_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerator Typedef für Regler Betriebszustand Steuerung. </p>
<p>Enthält die Betriebszustände des Reglers, welche dieser einnehmen kann, als Klarnamen. </p>
<table class="fieldtable">
<tr><th colspan="2">Aufzählungswerte</th></tr><tr><td class="fieldname"><a id="a2f49593e5867f1971ff3147d5421cbb9ab235a30030df40382a55b054395c5542"></a>REGLER_STATE_OFF&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2f49593e5867f1971ff3147d5421cbb9af54676cb64f772debe5bef366153dc0b"></a>REGLER_STATE_AUTO&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2f49593e5867f1971ff3147d5421cbb9a974c6906c8a3ab3d4b0123ef2e2c32f3"></a>REGLER_STATE_MANUAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2f49593e5867f1971ff3147d5421cbb9a73c84f84274530b967474867d3a4151b"></a>REGLER_STATE_LADEN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2f49593e5867f1971ff3147d5421cbb9a84ed36bb8a68c12c1b63a45c43a37b46"></a>REGLER_STATE_DEFROST&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definiert in Zeile <a class="el" href="wpRegler_8h_source.html#l00031">31</a> der Datei <a class="el" href="wpRegler_8h_source.html">wpRegler.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Dokumentation der Funktionen</h2>
<a id="afb8c37e2ac60ef06ab2ca3e72945031f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb8c37e2ac60ef06ab2ca3e72945031f">&#9670;&nbsp;</a></span>calcTvorlauf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float calcTvorlauf </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>tAussen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>kurvenstufe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>parallelver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>reduziert</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Berechnet Solltemperatur des Heizungsvorlauf mittels Heizkurve. </p>
<dl class="params"><dt>Parameter</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tAussen</td><td>gemessene Aussenlufttemperatur als 8bit Ganzzahlwert. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">kurvenstufe</td><td>eingestellte Stufe der Heizkurve. 8bit positive Ganzzahl. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parallelver</td><td>Eingestellte Parallelverschiebung der Vorlauftemperatur. 8bit Ganzzahl. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reduziert</td><td>Heizungsmodus mit 0= Normalbetrieb, 1= reduziert. 8bit Ganzzahl. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Rückgabe</dt><dd>Ausgabe der berechneten Solltemperatur des Vorlaufs als Gleitpunktzahl.</dd></dl>
<p>Berechnung des Vorlaufstemperatur-Sollwert abhängig von der aktuellen Aussenlufttemperatur, eingestellter Heizkurvenstufen, Parallelverschiebung und Betriebsmodus. Die Berechnung erfolgt mittels Ganzzahl-Arithmetik um den Speicherbedarf gering und die Rechenzeit kurz zu halten. Die Argumente werden deshalb um den Faktor 100 erhöht und erst nach erfolgter Berechnung wieder verkleinert. Steigung und Verschiebung in y-Richtung sind im Array <a class="el" href="wpRegler_8ino.html#afb08c087a8698d0478c1518278afee4b" title="Array mit Steigung (m) und y-Verschiebung(n) der Heizkurvenstufen 1-11. ">heizkurve</a> definiert. </p>

<p class="definition">Definiert in Zeile <a class="el" href="wpRegler_8ino_source.html#l00069">69</a> der Datei <a class="el" href="wpRegler_8ino_source.html">wpRegler.ino</a>.</p>
<div class="dynheader">
Hier ist ein Graph der zeigt, wo diese Funktion aufgerufen wird:</div>
<div class="dyncontent">
<div class="center"><img src="wpRegler_8h_afb8c37e2ac60ef06ab2ca3e72945031f_icgraph.png" border="0" usemap="#wpRegler_8h_afb8c37e2ac60ef06ab2ca3e72945031f_icgraph" alt=""/></div>
<map name="wpRegler_8h_afb8c37e2ac60ef06ab2ca3e72945031f_icgraph" id="wpRegler_8h_afb8c37e2ac60ef06ab2ca3e72945031f_icgraph">
<area shape="rect" id="node2" href="wpAuto_8ino.html#afed4915ead06746e4c683ee93642d8cb" title="Ruft die für den automatischen Betrieb nötigen Funktionen auf. " alt="" coords="649,5,737,32"/>
<area shape="rect" id="node4" href="wpRegler_8ino.html#a802a6ca104db722b268f0693497b7094" title="Zustandsautomat für den Heizungsvorlauf&#45;Temperaturregler. " alt="" coords="143,31,277,57"/>
<area shape="rect" id="node3" href="wpMain_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="Main&#45;Funktion welche ständig wiederholt wird. " alt="" coords="785,5,832,32"/>
<area shape="rect" id="node5" href="wpControl_8ino.html#ae710165b7dd2b053ad08f96dba48d54c" title="Statemachine für die Low&#45;Level Steuerung der Wärmepumpe. " alt="" coords="325,31,444,57"/>
<area shape="rect" id="node6" href="wpSpeicherladung_8ino.html#a1c0cf0ef9357ae514777ada14e9a8edd" title="Führt die Speicherladung und Abtauung mittels Zustandsautomat durch. " alt="" coords="492,31,601,57"/>
</map>
</div>

</div>
</div>
<a id="aed1136d4cbd9952d22b46b8e3893c4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed1136d4cbd9952d22b46b8e3893c4a5">&#9670;&nbsp;</a></span>initRegler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initRegler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reinitialisieren des Dreipunktreglers. </p>
<p>Diese Funktion initialisiert den Regler und setzt die internen Parameter zurück. Nach starken Temperaturschwankungen des Vorlaufs, beispielsweise nach Aufladen des Speichers, sollte eine Reinitialisierung vorgenommen werden. </p>

<p class="definition">Definiert in Zeile <a class="el" href="wpRegler_8ino_source.html#l00148">148</a> der Datei <a class="el" href="wpRegler_8ino_source.html">wpRegler.ino</a>.</p>
<div class="dynheader">
Hier ist ein Graph, der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="wpRegler_8h_aed1136d4cbd9952d22b46b8e3893c4a5_cgraph.png" border="0" usemap="#wpRegler_8h_aed1136d4cbd9952d22b46b8e3893c4a5_cgraph" alt=""/></div>
<map name="wpRegler_8h_aed1136d4cbd9952d22b46b8e3893c4a5_cgraph" id="wpRegler_8h_aed1136d4cbd9952d22b46b8e3893c4a5_cgraph">
<area shape="rect" id="node2" href="wpRegler_8ino.html#aedd27125fe6a72dd6e137c3b8a3d1a13" title="Quasi&#45;stegiger Dreipunktregler für Dreiweg&#45;Mischventil. " alt="" coords="129,5,228,32"/>
</map>
</div>
<div class="dynheader">
Hier ist ein Graph der zeigt, wo diese Funktion aufgerufen wird:</div>
<div class="dyncontent">
<div class="center"><img src="wpRegler_8h_aed1136d4cbd9952d22b46b8e3893c4a5_icgraph.png" border="0" usemap="#wpRegler_8h_aed1136d4cbd9952d22b46b8e3893c4a5_icgraph" alt=""/></div>
<map name="wpRegler_8h_aed1136d4cbd9952d22b46b8e3893c4a5_icgraph" id="wpRegler_8h_aed1136d4cbd9952d22b46b8e3893c4a5_icgraph">
<area shape="rect" id="node2" href="wpControl_8ino.html#ae710165b7dd2b053ad08f96dba48d54c" title="Statemachine für die Low&#45;Level Steuerung der Wärmepumpe. " alt="" coords="129,5,248,32"/>
<area shape="rect" id="node3" href="wpSpeicherladung_8ino.html#a1c0cf0ef9357ae514777ada14e9a8edd" title="Führt die Speicherladung und Abtauung mittels Zustandsautomat durch. " alt="" coords="296,5,405,32"/>
<area shape="rect" id="node4" href="wpAuto_8ino.html#afed4915ead06746e4c683ee93642d8cb" title="Ruft die für den automatischen Betrieb nötigen Funktionen auf. " alt="" coords="453,5,541,32"/>
<area shape="rect" id="node5" href="wpMain_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="Main&#45;Funktion welche ständig wiederholt wird. " alt="" coords="589,5,636,32"/>
</map>
</div>

</div>
</div>
<a id="a802a6ca104db722b268f0693497b7094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a802a6ca104db722b268f0693497b7094">&#9670;&nbsp;</a></span>reglerStatemachine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reglerStatemachine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wpRegler_8h.html#a2f49593e5867f1971ff3147d5421cbb9">reglerState_t</a>&#160;</td>
          <td class="paramname"><em>reglerState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zustandsautomat für den Heizungsvorlauf-Temperaturregler. </p>
<p>Der Regler kann verschiedene Zustände annehmen, welche die stetige Vorlauf- Temperaturregelung beeinflussen beziehungsweise diese ausser Kraft setzen.<br />
Im Zustand OFF wird der Regler ganz ausgeschalten, beispielsweise im Sommer.<br />
Im Zustand AUTO wird die Vorlauftemperatur stetig geregelt.<br />
Im Zustand MANUAL nimmt der Regler keinen Einfluss auf seine Steuerausgänge (Mischer auf/zu und Heizkreislaufpumpe). Somit können diese von anderen Modulen angesteuert werden ohne dass es zu Konflikten kommt.<br />
Die Zustände LADEN und ENTEISEN initialisieren den Regler gegebenfalls mit neuen Regelparametern, falls es durch die schnellen Temperaturwechsel zum instabilen Regelverhalten kommt.</p>
<dl class="params"><dt>Parameter</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">reglerState</td><td>Variable für die Anwahl des Reglerzustandes. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definiert in Zeile <a class="el" href="wpRegler_8ino_source.html#l00102">102</a> der Datei <a class="el" href="wpRegler_8ino_source.html">wpRegler.ino</a>.</p>
<div class="dynheader">
Hier ist ein Graph, der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="wpRegler_8h_a802a6ca104db722b268f0693497b7094_cgraph.png" border="0" usemap="#wpRegler_8h_a802a6ca104db722b268f0693497b7094_cgraph" alt=""/></div>
<map name="wpRegler_8h_a802a6ca104db722b268f0693497b7094_cgraph" id="wpRegler_8h_a802a6ca104db722b268f0693497b7094_cgraph">
<area shape="rect" id="node2" href="wpRegler_8ino.html#afb8c37e2ac60ef06ab2ca3e72945031f" title="Berechnet Solltemperatur des Heizungsvorlauf mittels Heizkurve. " alt="" coords="200,5,289,32"/>
<area shape="rect" id="node3" href="wpSensorik_8h.html#aeb03ba2c8dc0be735f75d2bbee8064b1" title="Messung der aktuellen Aussentemperatur in Grad Celsius. " alt="" coords="188,56,301,83"/>
<area shape="rect" id="node4" href="wpUser_8h.html#a6132506f43bcc6cffd99023797a83699" title="Bereitstellen der eingestellten Heizkurvenstufe. " alt="" coords="191,107,298,133"/>
<area shape="rect" id="node5" href="wpUser_8h.html#a92568e4f841036f5ae061e46f09dbde5" title="Gibt die vom User eingestellte Heizkurven&#45;Parallelverschiebung zurück. " alt="" coords="197,157,292,184"/>
<area shape="rect" id="node6" href="wpUser_8h.html#a0cb5ee680fd84dea322a8a24f6e26e77" title="Prüft ob eine reduzierte Vorlauftemperatur gewünscht wird. " alt="" coords="190,208,299,235"/>
<area shape="rect" id="node7" href="wpRegler_8ino.html#aedd27125fe6a72dd6e137c3b8a3d1a13" title="Quasi&#45;stegiger Dreipunktregler für Dreiweg&#45;Mischventil. " alt="" coords="195,259,294,285"/>
<area shape="rect" id="node8" href="wpSensorik_8h.html#a1fdd7775b19d4c50f37b9ee8174f4989" title="Messung der aktuellen Heizungs&#45;Vorlauftemperatur in Grad Celsius. " alt="" coords="190,309,299,336"/>
</map>
</div>
<div class="dynheader">
Hier ist ein Graph der zeigt, wo diese Funktion aufgerufen wird:</div>
<div class="dyncontent">
<div class="center"><img src="wpRegler_8h_a802a6ca104db722b268f0693497b7094_icgraph.png" border="0" usemap="#wpRegler_8h_a802a6ca104db722b268f0693497b7094_icgraph" alt=""/></div>
<map name="wpRegler_8h_a802a6ca104db722b268f0693497b7094_icgraph" id="wpRegler_8h_a802a6ca104db722b268f0693497b7094_icgraph">
<area shape="rect" id="node2" href="wpControl_8ino.html#ae710165b7dd2b053ad08f96dba48d54c" title="Statemachine für die Low&#45;Level Steuerung der Wärmepumpe. " alt="" coords="188,5,307,32"/>
<area shape="rect" id="node3" href="wpSpeicherladung_8ino.html#a1c0cf0ef9357ae514777ada14e9a8edd" title="Führt die Speicherladung und Abtauung mittels Zustandsautomat durch. " alt="" coords="355,5,464,32"/>
<area shape="rect" id="node4" href="wpAuto_8ino.html#afed4915ead06746e4c683ee93642d8cb" title="Ruft die für den automatischen Betrieb nötigen Funktionen auf. " alt="" coords="512,5,600,32"/>
<area shape="rect" id="node5" href="wpMain_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="Main&#45;Funktion welche ständig wiederholt wird. " alt="" coords="648,5,695,32"/>
</map>
</div>

</div>
</div>
<a id="a336e5d87772f3de9fb4e748a47092e95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a336e5d87772f3de9fb4e748a47092e95">&#9670;&nbsp;</a></span>tristateRegler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tristateRegler </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>kp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>e_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>hyst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>tn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quasi-stegiger Dreipunktregler für Dreiweg-Mischventil. </p>
<p>Diese Funktion beinhaltet einen Dreipunktregler mit quasi-stetigem Regelverhalten. Dieser Reglertyp ist zur Ansteuerung von elektrischen Stellantrieben geeignet, welche mit konstanter Stellgeschwindigkeit in beide Richtungen fahren können.<br />
Hauptmerkmal dieses Reglers ist die Rückführung einer prognostizierten Regelabweichung (ep) welche noch gar nicht an der Regelstrecke auftritt. Dadurch kann ein vielfach schnelleres Ausregeln bei langsam reagierenden Systemen erreicht werden.<br />
Die Funktion arbeitet mit Gleitpunktarithmetik was sie genau jedoch langsam macht. Reinitialisieren erfolgt durch Aufruf mit den Argumenten <code>w</code> = 0 und <code>x</code> = 0 oder einfacher durch Aufruf der Funktion <a class="el" href="wpRegler_8ino.html#aed1136d4cbd9952d22b46b8e3893c4a5" title="Reinitialisieren des Dreipunktreglers. ">initRegler()</a>.</p>
<dl class="params"><dt>Parameter</dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td>Sollwert auf welchen geregelt wird in °C.</td></tr>
    <tr><td class="paramname">x</td><td>Regelgrösse, also die gemessene Vorlauftemperatur in °C.</td></tr>
    <tr><td class="paramname">kp</td><td>Übertragungsbeiwert Rückführung optionaler Parameter</td></tr>
    <tr><td class="paramname">e_min</td><td>Ansprechempfindlichkeit (entspricht Totzone/2) in °C, optional.</td></tr>
    <tr><td class="paramname">hyst</td><td>Hysterese an den Totzonengrenzen in °C, optional.</td></tr>
    <tr><td class="paramname">tn</td><td>Rückführzeitkonstante in Sekunden, optional.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Zu beachten</dt><dd>Falls die Funktion ohne die optionalen Parameter aufgerufen wird, werden folgende Standardwerte eingesetzt:<ul>
<li>kp: 0.35</li>
<li>e_min: 0,4°C</li>
<li>hyst: 0,2°C</li>
<li>tn: 1,0s </li>
</ul>
</dd></dl>
<p>&lt; Regelabweichung <br />
<br />
<br />
<br />
 &lt; prognostizierte Regelabweichung <br />
<br />
<br />
 &lt; Rückführwert <br />
<br />
 &lt; aktuelle Laufzeit Motor in s <br />
 &lt; letzte berechnete Abweichung </p>

<p class="definition">Definiert in Zeile <a class="el" href="wpRegler_8ino_source.html#l00193">193</a> der Datei <a class="el" href="wpRegler_8ino_source.html">wpRegler.ino</a>.</p>
<div class="dynheader">
Hier ist ein Graph der zeigt, wo diese Funktion aufgerufen wird:</div>
<div class="dyncontent">
<div class="center"><img src="wpRegler_8h_a336e5d87772f3de9fb4e748a47092e95_icgraph.png" border="0" usemap="#wpRegler_8h_a336e5d87772f3de9fb4e748a47092e95_icgraph" alt=""/></div>
<map name="wpRegler_8h_a336e5d87772f3de9fb4e748a47092e95_icgraph" id="wpRegler_8h_a336e5d87772f3de9fb4e748a47092e95_icgraph">
<area shape="rect" id="node2" href="wpRegler_8ino.html#a802a6ca104db722b268f0693497b7094" title="Zustandsautomat für den Heizungsvorlauf&#45;Temperaturregler. " alt="" coords="152,5,287,32"/>
<area shape="rect" id="node7" href="wpRegler_8ino.html#aed1136d4cbd9952d22b46b8e3893c4a5" title="Reinitialisieren des Dreipunktreglers. " alt="" coords="181,56,257,83"/>
<area shape="rect" id="node3" href="wpControl_8ino.html#ae710165b7dd2b053ad08f96dba48d54c" title="Statemachine für die Low&#45;Level Steuerung der Wärmepumpe. " alt="" coords="335,31,453,57"/>
<area shape="rect" id="node4" href="wpSpeicherladung_8ino.html#a1c0cf0ef9357ae514777ada14e9a8edd" title="Führt die Speicherladung und Abtauung mittels Zustandsautomat durch. " alt="" coords="501,31,611,57"/>
<area shape="rect" id="node5" href="wpAuto_8ino.html#afed4915ead06746e4c683ee93642d8cb" title="Ruft die für den automatischen Betrieb nötigen Funktionen auf. " alt="" coords="659,31,747,57"/>
<area shape="rect" id="node6" href="wpMain_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="Main&#45;Funktion welche ständig wiederholt wird. " alt="" coords="795,31,841,57"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="wpRegler_8h.html">wpRegler.h</a></li>
    <li class="footer">Erzeugt von
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
